<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>
  <div class="container p-3 my-3 d-flex justify-content-center jumbotrom">
    <h1>Duncan's Just-In-Time Donuts!</h1>
  </div>
  <div class="d-flex justify-content-center jumbotrom">
    <h5>All donuts 50 cents each, cake or glazed!</h5>
  </div>
  <div class="d-flex justify-content-center">
    <div class="container-fluid">
      <form method="post" name="orderform" action="donuts.php" class="col-md-6 offset-md-3">
        <div class="row mb-3">
          <label for="name" class="col-sm-6 col-form-label">Name:</label>
          <div class="col-sm-6">
            <input type="text" class="form-control" id="username" name="username" minlength="3" maxlength="30"
              placeholder="Describe your Username">
          </div>
        </div>
        <div class="row mb-3">
          <label for="lastname" class="col-sm-6 col-form-label"># of cake donuts:</label>
          <div class="col-sm-6">
            <input type="text" class="form-control" name="cakedonuts" required id="cakedonuts" maxlength="9" size="9"
              value="" onchange="updateOrder();" placeholder="cakedonuts">
          </div>
        </div>
        <div class="row mb-3">
          <label for="lastname" class="col-sm-6 col-form-label"># of glazed donuts:</label>
          <div class="col-sm-6">
            <input type="text" class="form-control" name="glazeddonuts" required id="glazeddonuts" maxlength="9"
              size="9" value="" onchange="updateOrder();" placeholder="Confirm your password ">
          </div>
        </div>
        <div class="row mb-3">
          <label for="lastname" class="col-sm-6 col-form-label">Minutes 'till pickup':</label>
          <div class="col-sm-6">
            <input type="text" class="form-control" name="password" id="password" minlength="6" maxlength="9" size="9"
              placeholder="Confirm your password ">
          </div>
        </div>
        <div class="row mb-3">
          <label for="lastname" class="col-sm-6 col-form-label">Subtotal:</label>
          <div class="col-sm-6">
            <input type="text" class="form-control" name="subtotal" id="subtotal" minlength="6" maxlength="9" size="9"
              disabled placeholder="Confirm your password ">
          </div>
        </div>
        <div class="row mb-3">
          <label for="lastname" class="col-sm-6 col-form-label">Tax:</label>
          <div class="col-sm-6">
            <input type="text" class="form-control" name="tax" id="tax" minlength="6" maxlength="9" size="9" disabled
              placeholder="Confirm your password ">
          </div>
        </div>
        <div class="row mb-3">
          <label for="lastname" class="col-sm-6 col-form-label">Total:</label>
          <div class="col-sm-6">
            <input type="text" class="form-control" name="total" id="total" minlength="6" maxlength="9" size="9"
              disabled placeholder="Confirm your password ">
          </div>
        </div>

        <div class="form-grup">
          <div class="col-md-6 offset=md-3">
            <button onclick="placeOrder(this.form);" type="submit" id="enviar" class="btn btn-primary"><ion-icon
                name="send"></ion-icon> Place
              Order</button>
          </div>
        </div>

      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <script>
    function updateOrder() {
      const TAXRATE = 0.0925;
      const DONUTPRICE = 0.50;
      var numCakeDonuts = parseDonuts(document.getElementById('cakedonuts').value);
      if (isNaN(numCakeDonuts)) {
        numCakeDonuts = 0;
      }
      var numGlazedDonuts = parseDonuts(document.getElementById('glazeddonuts').value);
      if (isNaN(numGlazedDonuts)) {
        numGlazedDonuts = 0;
      }
      var subTotal = (numCakeDonuts + numGlazedDonuts) * DONUTPRICE;
      var tax = subTotal * TAXRATE;
      var total = subTotal + tax;
      document.getElementById("subtotal").value = "$" + subTotal.toFixed(2);
      document.getElementById("tax").value = "$" + tax.toFixed(2);
      document.getElementById("total").value = "$" + total.toFixed(2);
    }

    function parseDonuts(donutString) {
      numDonuts = parseInt(donutString);
      if (donutString.indexOf("dozen") != -1){
          numDonuts *= 12;
          console.log(donutString);
      }
       return numDonuts; 
    }
    function placeOrder() {
      form.submit();
    }
  </script>
</body>

</html>